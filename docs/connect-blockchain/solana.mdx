---
title: Integrate with the Solana Blockchain with Web3Auth
sidebar_label: Solana
hide_table_of_contents: false
---

import GetUserInfoSnippet from "@site/docs/common-snippets/_get-userinfo.mdx";
import TabItem from "@theme/TabItem";
import Tabs from "@theme/Tabs";

## Installation

To interact with the Solana blockchain, you can use [@solana/web3.js](https://solana-labs.github.io/solana-web3.js/) library with Web3Auth along with
`@web3auth/solana-provider` package.

<Tabs
  defaultValue="npm"
  values={[
    { label: "NPM", value: "npm" },
    { label: "Yarn", value: "yarn" },
    { label: "CDN", value: "cdn" },
  ]}
>
<TabItem value="npm">

```shell
npm install --save @solana/web3.js @web3auth/solana-provider
```

</TabItem>
<TabItem value="yarn">

```shell
yarn add @solana/web3.js @web3auth/solana-provider
```

</TabItem>
<TabItem value="cdn">

```shell
<script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
<script src="https://unpkg.com/@web3auth/solana-provider@1.1.0/dist/solanaProvider.umd.min.js"></script>
```

</TabItem>
</Tabs>

## Initializing Provider

Using `solana` as `chainNamespace` while initializing `web3auth` will provide a `Solana` compatible provider as **`web3auth.provider`** after
successful authentication.

<Tabs
  defaultValue="ts"
  values={[
    { label: "ES Modules/TypeScript", value: "ts" },
    { label: "CommonJS", value: "js" },
  ]}
>
<TabItem value="ts">

```js
import { Web3Auth } from "@web3auth/web3auth";
import { SolanaWallet } from "@web3auth/solana-provider";
import { Connection, LAMPORTS_PER_SOL, PublicKey, SystemProgram, Transaction } from "@solana/web3.js";

const web3auth = new Web3Auth({
  clientId: "YOUR_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "SOLANA",
    chainId: "0x1",
  },
});
await web3auth.initModal();

const web3authProvider = web3auth.connect();

const solanaWallet = new SolanaWallet(web3authProvider); // web3auth.provider
```

</TabItem>
<TabItem value="js">

```js
const { Web3Auth } = require("@web3auth/web3auth");
const { SolanaWallet } = require("@web3auth/solana-provider");
const { Connection, LAMPORTS_PER_SOL, PublicKey, SystemProgram, Transaction } = require("@solana/web3.js");

const web3auth = new Web3Auth({
  clientId: "YOUR_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "SOLANA",
    chainId: "0x1",
  },
});
await web3auth.initModal();

const web3authProvider = web3auth.connect();

const solanaWallet = new SolanaWallet(web3authProvider); // web3auth.provider
```

</TabItem>
</Tabs>

## Get User Info

<GetUserInfoSnippet />

## Get Account and Balance

```js
import { Web3Auth } from "@web3auth/web3auth";
import { SolanaWallet } from "@web3auth/solana-provider";
import { Connection, LAMPORTS_PER_SOL, PublicKey, SystemProgram, Transaction } from "@solana/web3.js";

const web3auth = new Web3Auth({
  clientId: "YOUR_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "SOLANA",
    chainId: "0x1",
  },
});
await web3auth.initModal();

const web3authProvider = web3auth.connect();

const solanaWallet = new SolanaWallet(web3authProvider); // web3auth.provider

// Get user's Solana public address
const accounts = await solanaWallet.requestAccounts();

const connectionConfig = await solanaWallet.request({
  method: "solana_provider_config",
  params: [],
});

const connection = new Connection(connectionConfig.rpcTarget);

// Fetch the balance for the specified public key
const balance = await conn.getBalance(new PublicKey(accounts[0]));
```

## Sign a Transaction

```js
import { Web3Auth } from "@web3auth/web3auth";
import { SolanaWallet } from "@web3auth/solana-provider";
import { Connection, LAMPORTS_PER_SOL, PublicKey, SystemProgram, Transaction } from "@solana/web3.js";

const web3auth = new Web3Auth({
  clientId: "YOUR_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "SOLANA",
    chainId: "0x1",
  },
});
await web3auth.initModal();

const web3authProvider = web3auth.connect();

const solanaWallet = new SolanaWallet(web3authProvider); // web3auth.provider

const connectionConfig = await solanaWallet.request({
  method: "solana_provider_config",
  params: [],
});

const connection = new Connection(connectionConfig.rpcTarget);

const accounts = await solanaWallet.requestAccounts();
const blockhash = (await connection.getRecentBlockhash("finalized")).blockhash;
const TransactionInstruction = SystemProgram.transfer({
  fromPubkey: new PublicKey(accounts[0]),
  toPubkey: new PublicKey(accounts[0]),
  lamports: 0.01 * LAMPORTS_PER_SOL,
});
const transaction = new Transaction({
  recentBlockhash: blockhash,
  feePayer: new PublicKey(pubKey[0]),
}).add(TransactionInstruction);

const signedTx = await solanaWallet.signTransaction(transaction);
console.log(signedTx.signature);
```

## Sign all Transactions

```js
import { Web3Auth } from "@web3auth/web3auth";
import { SolanaWallet } from "@web3auth/solana-provider";
import { Connection, LAMPORTS_PER_SOL, PublicKey, SystemProgram, Transaction } from "@solana/web3.js";

const web3auth = new Web3Auth({
  clientId: "YOUR_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "SOLANA",
    chainId: "0x1",
  },
});
await web3auth.initModal();

const web3authProvider = web3auth.connect();

const solanaWallet = new SolanaWallet(web3authProvider); // web3auth.provider

const connectionConfig = await solanaWallet.request({
  method: "solana_provider_config",
  params: [],
});

const connection = new Connection(connectionConfig.rpcTarget);

const accounts = await solanaWallet.requestAccounts();
const blockhash = (await connection.getRecentBlockhash("finalized")).blockhash;
const TransactionInstruction = SystemProgram.transfer({
  fromPubkey: new PublicKey(accounts[0]),
  toPubkey: new PublicKey(accounts[0]),
  lamports: 0.01 * LAMPORTS_PER_SOL,
});
const transaction = new Transaction({
  recentBlockhash: blockhash,
  feePayer: new PublicKey(pubKey[0]),
}).add(TransactionInstruction);

const signedTx = await solanaWallet.signAllTransactions(transaction);
console.log(signedTx.signature);
```

## Sign and Send a Transaction

```js
import { Web3Auth } from "@web3auth/web3auth";
import { SolanaWallet } from "@web3auth/solana-provider";
import { Connection, LAMPORTS_PER_SOL, PublicKey, SystemProgram, Transaction } from "@solana/web3.js";

const web3auth = new Web3Auth({
  clientId: "YOUR_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "SOLANA",
    chainId: "0x1",
  },
});
await web3auth.initModal();

const web3authProvider = web3auth.connect();

const solanaWallet = new SolanaWallet(web3authProvider); // web3auth.provider

const connectionConfig = await solanaWallet.request({
  method: "solana_provider_config",
  params: [],
});

const connection = new Connection(connectionConfig.rpcTarget);

const accounts = await solanaWallet.requestAccounts();
const blockhash = (await connection.getRecentBlockhash("finalized")).blockhash;
const TransactionInstruction = SystemProgram.transfer({
  fromPubkey: new PublicKey(accounts[0]),
  toPubkey: new PublicKey(accounts[0]),
  lamports: 0.01 * LAMPORTS_PER_SOL,
});
const transaction = new Transaction({
  recentBlockhash: blockhash,
  feePayer: new PublicKey(pubKey[0]),
}).add(TransactionInstruction);
const { signature } = await solanaWallet.signAndSendTransaction(transaction);
```

## Sign Message

```js
import { Web3Auth } from "@web3auth/web3auth";
import { SolanaWallet } from "@web3auth/solana-provider";
import { Connection, LAMPORTS_PER_SOL, PublicKey, SystemProgram, Transaction } from "@solana/web3.js";

const web3auth = new Web3Auth({
  clientId: "YOUR_CLIENT_ID", // get it from Web3Auth Dashboard
  chainConfig: {
    chainNamespace: "SOLANA",
    chainId: "0x1",
  },
});
await web3auth.initModal();

const web3authProvider = web3auth.connect();

const solanaWallet = new SolanaWallet(web3authProvider); // web3auth.provider

const msg = Buffer.from("Test Signing Message ", "utf8");
const result = await solanaWallet.signMessage(msg);
console.log(result.toString());
```

## Fetch User's Private Key

`solanaPrivateKey` is used to fetch the private key of the logged in user. It is only available for `in-app` adapters like `openlogin`.

```js
//Assuming user is already logged in.
async getPrivateKey() {
    const privateKey = await web3auth.provider.request({
        method: "solanaPrivateKey"
    });
    //Do something with privateKey
}
```

## Getting a provider from private key.

`@web3auth/solana-provider` package can be used to get a **Solana** compatible provider. You can use this package with our SDKs, to get a Solana
provider from the logged-in user's private key.

```js
import { PrivateKeyWallet } from "@web3auth/solana-provider";

/*
privKey: any secp512k1 private key.
*/

async setProvider(privKey: string) {
    this.PrivateKeyProvider = new PrivateKeyWallet({
    config: {
        /*
        pass the chain config that you want to connect with
        all chainConfig fields are required.
        */
        chainConfig: {
        chainId: "0x1",
        rpcTarget: "https://ssc-dao.genesysgo.net", // This is the testnet RPC, please pass your own endpoint while creating an app
        displayName: "solana",
        ticker: "SOL",
        tickerName: "Solana",
        },
    },
    });
    /*
    pass user's private key here.
    after calling setupProvider, we can use
    this.PrivateKeyProvider._providerProxy as a solana provider
    */
    const provider = await this.PrivateKeyProvider.solanaPrivateKey(privKey);
}
```

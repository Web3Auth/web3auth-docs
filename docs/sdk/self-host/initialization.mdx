---
title: Initialization

displayed_sidebar: sdk
description: "Self Host - Initialization  | Documentation - Web3Auth"
---

---

import ModulesDescription from "@site/src/common/sdk/selfHost/_modules-description.mdx";
import ModulesExample from "@site/src/common/sdk/selfHost/_modules-example.mdx";
import ServiceProviderExample from "@site/src/common/sdk/selfHost/_service-provider-example.mdx";
import StorageLayerExample from "@site/src/common/sdk/selfHost/_storage-layer-example.mdx";
import TKeyArgs from "@site/src/common/sdk/selfHost/_tkey-args.mdx";
import TkeyInitParams from "@site/src/common/sdk/selfHost/_tkey-init-params.mdx";
import TKeyInstanceExample from "@site/src/common/sdk/selfHost/_tkey-instance-example.mdx";
import TriggerLoginExample from "@site/src/common/sdk/selfHost/_trigger-login-example.mdx";

After installation, the next step to using Web3Auth Self Host is to Initialize the SDK.

The Initialization takes a few steps, including initiating the SDK and setting up the service provider, storage layer and modules.

- [Configuration of Service Provider](#configuring-service-provider) _(recommended for social login shares)_
- [Configuration of Storage Layer](#configuring-storage-layer) _(optional)_
- [Configuration of Modules](#configuring-modules) _(optional)_
- **[Instantiation of tKey](#instantiating-tkey)**
- [Initialization of Service Provider](#initializing-service-provider) _(recommended for social login shares)_
- [Triggering Login using Service Provider](#triggering-login-using-service-provider) _(recommended for social login shares)_
- **[Initialization of tKey](#initializing-tkey)**

Please note that these are the most critical steps where you must pass on different parameters according to the need of your project. Additionally,
Whitelabeling and Custom Authentication must be configured within this step if you wish to customize your Web3Auth Instance.

## Configuring Service Provider

---

Service Provider in `tKey` is used for generating a [**Share B**](/sdk/self-host), i.e. the private key share managed by a wallet service provider via
their authentication flows. This share in the Web3Auth Plug and Play setup generally refers to the social login aspect, where we associate a private
key share with the user's social login, enabling the seamless login experience.

In the Web3Auth Self Host setup, you have to use the Web3Auth Service Provider (`@tkey/service-provider-torus`), which basically implements Web3Auth's
Social Login feature as a service provider, enabling you to associate the social login of the user as one of the shares.

#### [`@tkey/service-provider-torus`](https://npmjs.com/package/@tkey/service-provider-torus)

:::tip Service Provider Reference

Look at the **[Service Provider Reference](/sdk/self-host/service-provider)** to learn more about the Web3Auth Service Provider and its
configurations.

:::

### Example

<ServiceProviderExample />

## Configuring Storage Layer

---

The storage layer is needed to store and recall the shared metadata information to recover the private key from the generated `tKey`. For this, we use
the `@tkey/storage-layer-torus` SDK, allowing you to get and set the Metadata for the various shares generated.

#### [`@tkey/storage-layer-torus`](/sdk/self-host/installation#tkeystorage-layer-torus)

:::tip Storage Layer Reference

Look at the **[Storage Layer Reference](/sdk/self-host/storage-layer)** to learn more about the Web3Auth Storage Layer and its configurations.

:::

### Example

<StorageLayerExample />

## Configuring Modules

---

<ModulesDescription />

### Example

<ModulesExample />

## Instantiating tKey

---

#### Import the `ThresholdKey` class from `@tkey/core`

```javascript
import ThresholdKey from "@tkey/core";
```

#### Assign the `ThresholdKey` class to a variable

```javascript
const tKey = new ThresholdKey(TKeyArgs);
```

This ThresholdKey constructor takes an object with `TKeyArgs` as input.

### Parameters

<TKeyArgs />

### Example

<TKeyInstanceExample />

## Initializing Service Provider

---

:::note

This step is mandatory if you're using the Web3Auth Service Provider and have instantiated it as [mentioned above](#torus-service-provider). If not,
feel free to ignore this step, but make sure to instantiate your preferred wallet so that while logging in and generating tKey, you can pass over the
private key to the base service provider.

:::

If you're using the Web3Auth Service Provider, you need to initialize it within your constructor function so as to use it while logging your user in
through the social accounts. This is done by calling the `init()` function within the `tKey` instance's `serviceProvider` property.

:::tip Service Provider Reference

Checkout the **[Service Provider Reference](/sdk/self-host/service-provider#initialization-1)** to learn more about `init()` and its configurations.

:::

### Example

```js
await (tKey.serviceProvider as TorusServiceProvider).init({ skipSw: false });
```

## Triggering Login using Service Provider

---

Once you have initialised the Web3Auth Service Provider, you're ready to trigger the login process. This is a needed step since this will generate a
private key which will be needed by the tKey to generate it's share. This is done by calling the `triggerLogin()` function within the `tKey`
instance's `serviceProvider` property.

:::tip Service Provider Reference

Checkout the **[Service Provider Reference](/sdk/self-host/service-provider#triggering-login)** to learn more about `triggerLogin()` and its
configurations.

:::

### Example

<TriggerLoginExample />

## Initializing tKey

---

Once you have triggered the login process, you're ready to initialize the tKey. This will generate a Threshold Key corresponding to your login
provider.

```ts
tKey.initialize(params?);
```

<TkeyInitParams />

### Example

```js
await tKey.initialize();
```
